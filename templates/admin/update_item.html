{% extends "index.html" %} {% block title %}Update Product{% endblock %} {%
block content %}

<style>
  body {
    background: #f5f7fa;
  }

  .update-card {
    border-radius: 15px;
    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.15);
    background: #fff;
  }

  .form-label {
    font-weight: 600;
  }

  img.preview {
    border: 2px solid #ddd;
    padding: 5px;
    background: white;
    border-radius: 10px;
  }

  h3.page-title {
    color: #052c65;
    font-weight: 700;
  }

  .btn-custom {
    background-color: #052c65;
    color: #fff;
  }

  .btn-custom:hover {
    background-color: #063776;
    color: #fff;
  }

  a.back-link {
    font-weight: bold;
    color: #052c65;
  }

  a.back-link:hover {
    text-decoration: underline;
  }
</style>

<div class="container py-5">
  <div class="col-lg-5 col-md-7 col-sm-10 mx-auto">
    <div class="update-card p-4">
      <h3 class="text-center page-title mb-3">
        <i class="fa-solid fa-pen-to-square"></i> Update Product
      </h3>

      <!-- Flash Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div
        class="alert alert-{{ category }} alert-dismissible fade show small"
        role="alert"
      >
        {{ message }}
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      {% endfor %} {% endif %} {% endwith %}

      <form
        method="POST"
        action="/admin/update-item/{{ product.product_id }}"
        enctype="multipart/form-data"
      >
        <label class="form-label">Product Name</label>
        <input
          type="text"
          name="name"
          value="{{ product.name }}"
          class="form-control mb-3"
          required
        />

        <label class="form-label">Description</label>
        <textarea
          name="description"
          class="form-control mb-3"
          rows="3"
          required
        >
{{ product.description }}</textarea
        >

        <label class="form-label">Category</label>
        <input
          type="text"
          name="category"
          value="{{ product.category }}"
          class="form-control mb-3"
          required
        />

        <label class="form-label">Price (â‚¹)</label>
        <input
          type="number"
          step="0.01"
          name="price"
          value="{{ product.price }}"
          class="form-control mb-3"
          required
        />

        <label class="form-label">Current Image</label><br />
        <img
          src="/static/uploads/product_images/{{ product.image }}"
          width="160"
          class="preview mb-3"
        />

        <label class="form-label">Choose New Image (Optional)</label>
        <input
          type="file"
          name="image"
          accept="image/*"
          class="form-control mb-3"
        />

        <button type="submit" class="btn btn-custom w-100 mt-2">
          Update Product
        </button>
      </form>

      <div class="text-center mt-3">
        <a href="/admin/item-list" class="back-link"
          ><i class="fa-solid fa-arrow-left"></i> Back to Product List</a
        >
      </div>
    </div>
  </div>
</div>

{% endblock %}
